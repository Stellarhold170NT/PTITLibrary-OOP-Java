<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta property="og:title" content="PTIT Library" />
        <meta
            property="og:description"
            content="Ptiters are united by a share purpose"
        />
        <meta
            property="og:image"
            content="https://stellarhold170nt.github.io/PTITLibrary/assets/img/icon.svg"
        />
        <meta property="og:type" content="website" />
        <link
            rel="icon"
            href="https://stellarhold170nt.github.io/PTITLibrary/assets/img/icon.svg"
        />
        <title>Công Nghệ Thông Tin</title>

        <link rel="stylesheet" href="/PTITLibrary/assets/css/reset.css" />
        <link rel="stylesheet" href="/PTITLibrary/assets/css/style.css" />
        <link rel="stylesheet" href="/PTITLibrary/assets/css/table.css" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        />
    </head>
    <body>
        <jsp:include page="header.jsp" />
        <div class="header">
            <div class="main-content">
                <div class="body">
                    <table>
                        <tr>
                            <td><span>Học kỳ 1</span><span>(11 TC)</span></td>
                            <td class="mandatory">
                                <span>Triết học Mác-Lênin</span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="mandatory">
                                <span>Tin học cơ sở 1</span><span>(2 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Giải tích 1</span><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Đại số</span><span>(3 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 2</span><span>(19 TC)</span></td>
                            <td class="mandatory">
                                <span>Kinh tế chính trị Mác-Lênin</span
                                ><span>(2 TC) </span>
                            </td>
                            <td class="mandatory">
                                <span>Tiếng Anh (Course&nbsp;1)</span
                                ><span>(4 TC)</span>
                            </td>
                            <td class="mandatory">
                                <span>Tin học cơ sở 2</span><span>(2 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Giải tích 2</span><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Pháp luật đại cương</span
                                ><span>(2 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Vật lý ứng dụng</span><span>(4 TC)</span>
                            </td>
                            <td class="base">
                                <span>Kỹ thuật số</span><span>(2 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 3</span><span>(17 TC)</span></td>
                            <td class="mandatory">
                                <span>Chủ nghĩa xã hội khoa học</span
                                ><span>(2 TC) </span>
                            </td>
                            <td class="mandatory">
                                <span>Tiếng Anh (Course&nbsp;2)</span
                                ><span>(4 TC)</span>
                            </td>
                            <td class="base">
                                <span>Ngôn ngữ lập trình C++</span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Toán rời rạc 1</span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Xử lý tín hiệu số</span
                                ><span>(2 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Xác suất thống kê</span
                                ><span>(3 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 4</span><span>(18 TC)</span></td>
                            <td class="mandatory">
                                <span>Tư tưởng Hồ Chí Minh</span
                                ><span>(2 TC) </span>
                            </td>
                            <td class="mandatory">
                                <span>Tiếng Anh (Course&nbsp;3)</span
                                ><span>(4 TC)</span>
                            </td>
                            <td class="base">
                                <span>Kiến trúc máy tính</span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Toán rời rạc 2</span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Cấu trúc dữ liệu và giải thuật</span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Lý thuyết thông tin</span
                                ><span>(3 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 5</span><span>(19 TC)</span></td>
                            <td class="mandatory">
                                <span>Lịch sử Đảng cộng sản VN </span
                                ><span>(2 TC) </span>
                            </td>
                            <td class="mandatory">
                                <span>Tiếng Anh (Course&nbsp;3 Plus) </span
                                ><span>(4 TC)</span>
                            </td>
                            <td class="base">
                                <span>Hệ điều hành</span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Lập trình hướng đối tượng </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Cơ sở dữ liệu </span><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Mạng máy tính </span><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Lập trình Python </span
                                ><span>(3 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 6</span><span>(19 TC)</span></td>
                            <td class="mandatory">
                                <span>Nhập môn công nghệ phần mềm </span
                                ><span>(3 TC) </span>
                            </td>
                            <td class="mandatory">
                                <span>Nhập môn trí tuệ nhân tạo </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>An toàn và bảo mật HTTT </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Lâp trình Web </span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Cơ sở dữ liệu phân tán </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="compulsory">
                                <span>Thực tập cơ sở </span><span>(4 TC)</span>
                            </td>
                        </tr>
                        <tr>
                            <td><span>Học kỳ 7</span><span>(18 TC)</span></td>
                            <td class="Specialized">
                                <span>QLDA phần mềm </span><span>(3 TC) </span>
                            </td>
                            <td class="Specialized">
                                <span>IoT và ứng dụng </span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Phân tích và thiết kế HTTT </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Xử lý ảnh </span><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span>Học phần tự chọn </span
                                ><span>(6 TC)</span>
                            </td>
                        </tr>

                        <tr>
                            <td><span>Học kỳ 8</span><span>(17 TC)</span></td>
                            <td class="specialized">
                                <span>Thiết kế mạng máy tính </span
                                ><span>(3 TC) </span>
                            </td>
                            <td class="Specialized">
                                <span>Đánh giá hiệu năng mạng </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="Specialized">
                                <span>An ninh mạng</span><span>(3 TC)</span>
                            </td>
                            <td class="Specialized">
                                <span>Học phần tự chọn </span
                                ><span>(3 TC)</span>
                            </td>
                            <td class="base">
                                <span
                                    >Phương pháp luận nghiên cứu khoa học </span
                                ><span>(2 TC)</span>
                            </td>
                        </tr>

                        <tr>
                            <td><span>Học kỳ 9</span><span>(12 TC)</span></td>
                            <td class="base">
                                <span>Thực tập và tốt nghiệp </span
                                ><span>(12 TC)</span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="view-doc">
            <div class="content">
                <button class="view-close-btn">
                    <span class="material-symbols-outlined"> close </span>
                </button>
                <div class="view-document">
                    <div class="view-imgbook">
                        <img src="./assets/img/book.svg" alt="" />
                    </div>
                    <div class="view-info">
                        <span class="view-title">Tư tưởng Hồ Chí Minh</span>
                        <div
                            style="
                                display: flex;
                                align-items: center;
                                margin-bottom: 32px;
                                gap: 8px;
                            "
                        >
                            <img src="./assets/img/icon-tc.svg" alt="" /><span
                                class="view-number"
                                >3 TC</span
                            >
                        </div>
                        <a href="#!"
                            ><span class="view-btn"
                                ><span class="material-symbols-outlined">
                                    plagiarism </span
                                ><span>View Document</span></span
                            ></a
                        >
                    </div>
                </div>
                <div class="view-available-document">
                    <span>Tài Liệu Tổng Hợp Được</span>
                    <ul class="list">
                        <li>
                            <div class="giao-trinh">
                                <img
                                    src="./assets/img/available-icon1.svg"
                                    alt=""
                                />
                                <span>Giáo Trình</span>
                            </div>
                        </li>
                        <li>
                            <div class="bai-giang">
                                <img
                                    src="./assets/img/available-icon2.svg"
                                    alt=""
                                />
                                <span>Bài Giảng</span>
                            </div>
                        </li>
                        <li>
                            <div class="ngan-hang">
                                <img
                                    src="./assets/img/available-icon3.svg"
                                    alt=""
                                />
                                <span>Ngân Hàng</span>
                            </div>
                        </li>
                        <li>
                            <div class="de-thi">
                                <img
                                    src="./assets/img/available-icon4.svg"
                                    alt=""
                                />
                                <span>Đề Thi</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <jsp:include page="footer.jsp" />

        <% String majorCode = (String) session.getAttribute("majorCode");%>

        <script src="./assets/js/jquery3.6.0.js"></script>
        <script>
            var majorCode = "<%=majorCode%>";
            $.ajax({
                url: "./assets/data/major_road_map.json",
                type: "GET",
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    console.log("Major Code = " + majorCode);
                    data.forEach((major) => {
                        console.log("Major ID = " + major.major_id);
                        if (major.major_id === majorCode) {
                            console.log("CREATE TABLE");
                            var table = document.querySelector("table");
                            table.innerHTML = "";

                            for (let semester in major) {
                                if (semester !== "major_id") {
                                    let totalCredits = major[semester].reduce(
                                        (sum, subject) => sum + subject.credits,
                                        0
                                    );

                                    var tr = document.createElement("tr");
                                    tr.insertAdjacentHTML(
                                        "beforeend",
                                        `
                                    <td>
                                <span
                                    >` +
                                            semester +
                                            `</span
                                ><span>(` +
                                            totalCredits +
                                            `TC)</span>
                            </td>
                                    
                                    `
                                    );

                                    major[semester].forEach((subject) => {
                                        tr.insertAdjacentHTML(
                                            "beforeend",
                                            `
                                    <td>
                                <span
                                    >` +
                                                subject.name +
                                                `</span
                                ><span>(` +
                                                subject.credits +
                                                `TC)</span>
                            </td>
                                    
                                    `
                                        );
                                    });

                                    console.log(tr);
                                    table.insertAdjacentElement(
                                        "beforeend",
                                        tr
                                    );
                                }
                            }
                        }
                    });

                    editTable();
                },
            });
        </script>
        <script>
            function editTable() {
                var listSubject = document.querySelectorAll("td");
                console.log("len" + listSubject.length);
                for (var i = 0; i < listSubject.length; i++) {
                    var tableData = listSubject[i];

                    var a = document.createElement("a");
                    var div = document.createElement("div");

                    a.href = "#!";
                    a.style.width = "100%";
                    a.style.height = "100%";
                    div.innerHTML = tableData.innerHTML;

                    tableData.innerHTML = "";
                    a.appendChild(div);
                    tableData.appendChild(a);

                    div.style.display = "flex";
                    div.style.flexDirection = "column";
                    div.style.alignItems = "center";
                    div.style.justifyContent = "center";
                    div.style.gap = "8px";

                    a.style.display = "flex";
                    a.style.alignItems = "center";
                    a.style.justifyContent = "center";
                }

                var viewDoc = document.querySelector(".view-doc");
                var viewDocLink = document.querySelector(".view-doc a");
                var aElements = document.querySelectorAll("td a");
                aElements.forEach((a) => {
                    a.addEventListener("click", function () {
                        viewDocLink.href = "#!";
                        viewDocLink.target = "";
                        viewDoc.setAttribute("class", "view-doc active");
                        var spanElement = a.querySelector("div > span");
                        var name = spanElement.innerHTML;

                        var spanElement2 = a.querySelector(
                            "div span:last-child"
                        );

                        var viewTitle = document.querySelector(".view-title");
                        viewTitle.innerHTML = name;
                        var viewNumber = document.querySelector(".view-number");
                        viewNumber.innerHTML = spanElement2.innerHTML;
                        console.log("name = " + name);
                        $.ajax({
                            url: "./assets/data/data.json",
                            dataType: "json",
                            success: function (dataObject) {
                                console.log("CREATE LINK");
                                dataObject.MonHocChung.forEach((monhoc) => {
                                    if (name === monhoc.name) {
                                        console.log(monhoc.link);
                                        viewDocLink.href = monhoc.link;
                                        viewDocLink.target = "_blank";
                                    }
                                });

                                dataObject.CongNgheThongTin.forEach(
                                    (monhoc) => {
                                        console.log(monhoc.name);
                                        if (name === monhoc.name) {
                                            console.log(monhoc.link);
                                            viewDocLink.href = monhoc.link;
                                            viewDocLink.target = "_blank";
                                        }
                                    }
                                );

                                var update = document.querySelector(
                                    ".view-available-document > span"
                                );

                                var list = document.querySelector(
                                    ".view-available-document .list"
                                );

                                if (viewDocLink.target == "") {
                                    update.innerHTML = "Hiện chưa có tài liệu";
                                    list.style.visibility = "hidden";
                                } else {
                                    update.innerHTML = "Tài liệu tổng hợp được";
                                    list.style.visibility = "visible";
                                }
                            },
                        });
                    });
                });

                var viewCloseBtn = document.querySelector(".view-close-btn");

                viewCloseBtn.addEventListener("click", function () {
                    viewDoc.setAttribute("class", "view-doc");
                });
            }
        </script>
        <!-- <script src="./assets/js/script.js"></script> -->
    </body>
</html>
